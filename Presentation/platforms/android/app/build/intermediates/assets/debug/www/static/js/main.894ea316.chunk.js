(this.webpackJsonphelloworld=this.webpackJsonphelloworld||[]).push([[0],{150:function(e,t,s){},151:function(e,t,s){},165:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),i=s(59),o=s.n(i),c=(s(150),s(151),s(66)),r=s(22),l=s(5),d=s(11),h=s(15),j=s(16),b=s(14),u=s(18),p=s(17),O=s(203),g=s(233),f=s(220),x=s(237),m=s(219),v="http://184.72.78.180:8000",y=s(1),C=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){var n;return Object(h.a)(this,s),(n=t.call(this,e,a)).state={email:"",password:"",open:!1,message:""},n.register=n.register.bind(Object(b.a)(n)),n.login=n.login.bind(Object(b.a)(n)),n.addState=n.addState.bind(Object(b.a)(n)),n.onClose=n.onClose.bind(Object(b.a)(n)),n}return Object(j.a)(s,[{key:"addState",value:function(e){this.setState(Object(d.a)(Object(d.a)({},this.state),{},Object(l.a)({},e.target.id,e.target.value)))}},{key:"register",value:function(){this.props.history.push("/Register")}},{key:"login",value:function(){var e=this;fetch("".concat(v)+"/login",{method:"POST",body:JSON.stringify({email:this.state.email,password:this.state.password}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var s=t.token,a=t.status,n=t.message,i=t.userId;if(404!==a&&401!==a)return sessionStorage.setItem("token",s),sessionStorage.setItem("id",i),console.log("Tocken"),console.log(t),e.props.history.push("/Dashboard");e.setState(Object(d.a)(Object(d.a)({},e.state),{},{message:n,open:!0}))})).catch((function(t){console.log("The error is "),console.log(t),e.setState(Object(d.a)(Object(d.a)({},e.state),{},{message:"Fetch failed, please check your internet connection",open:!0}))}))}},{key:"onClose",value:function(e,t){"clickaway"!==t&&this.setState({open:!1})}},{key:"render",value:function(){return Object(y.jsx)("div",{className:"d-flex justify-content-center pt-5wf4",children:Object(y.jsxs)(O.a,{fullWidth:!0,sx:{maxWidth:"lg",width:600,padding:4},children:[Object(y.jsx)("h3",{children:"Login"}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a,{fullWidth:!0,variant:"filled",children:Object(y.jsx)(f.a,{id:"email",label:"Email",variant:"filled",onChange:this.addState,sx:{paddingBottom:5}})}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a,{fullWidth:!0,variant:"filled",children:Object(y.jsx)(f.a,{id:"password",label:"Password",variant:"filled",type:"password",onChange:this.addState,sx:{paddingBottom:5}})}),Object(y.jsx)("br",{}),Object(y.jsxs)("div",{className:"d-flex pt-5",children:[Object(y.jsx)("div",{className:" w-50",children:Object(y.jsx)(x.a,{fullWidth:!0,variant:"contained",onClick:this.login,sx:{backgroundColor:"#22b573"},children:"Login"})}),Object(y.jsx)("div",{className:"w-50",children:Object(y.jsx)(x.a,{fullWidth:!0,variant:"contained",onClick:this.register,sx:{backgroundColor:"#22b573"},children:"SingUp"})})]}),Object(y.jsx)(m.a,{open:this.state.open,autoHideDuration:6e3,onClose:this.onClose,message:this.state.message})]})})}}]),s}(a.Component),k=s(221),S=s(214),w=s(226),T={Benefited:"BENEFITED",Volunteer:"VOLUNTEER"},N=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){var n;return Object(h.a)(this,s),(n=t.call(this,e,a)).state={name:"",lastName:"",profileType:"",email:"",password:"",passwordConfirm:"",helperText:""},n.addState=n.addState.bind(Object(b.a)(n)),n.addType=n.addType.bind(Object(b.a)(n)),n.validatePassword=n.validatePassword.bind(Object(b.a)(n)),n.register=n.register.bind(Object(b.a)(n)),n}return Object(j.a)(s,[{key:"addState",value:function(e){this.setState(Object(d.a)(Object(d.a)({},this.state),{},Object(l.a)({},e.target.id,e.target.value)))}},{key:"addType",value:function(e){this.setState(Object(d.a)(Object(d.a)({},this.state),{},{profileType:e.target.value}))}},{key:"validatePassword",value:function(e){this.state.password==e.target.value?this.setState(Object(d.a)(Object(d.a)({},this.state),{},{helperText:"Password match!"})):this.setState(Object(d.a)(Object(d.a)({},this.state),{},{helperText:"Password does not match."}))}},{key:"register",value:function(){var e=this;console.log(v+"/register"),fetch("".concat(v)+"/register",{method:"POST",body:JSON.stringify({name:this.state.name,lastName:this.state.lastName,profileType:this.state.profileType,email:this.state.email,password:this.state.password}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var s=t.token;return sessionStorage.setItem("token",s),sessionStorage.setItem("email",e.state.email),console.log(sessionStorage),e.props.history.push("/Login")}))}},{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsx)("div",{className:"d-flex justify-content-center pt-5wf4",children:Object(y.jsxs)(O.a,{fullWidth:!0,sx:{maxWidth:"lg",width:600,padding:4},children:[Object(y.jsx)("h3",{className:"justify-content-center",children:"Register"}),Object(y.jsx)(g.a,{variant:"filled",sx:{m:1,minWidth:300},children:Object(y.jsx)(f.a,{fullWidth:!0,id:"name",label:"Name",variant:"filled",onChange:this.addState})}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a,{variant:"filled",sx:{m:1,minWidth:300},children:Object(y.jsx)(f.a,{fullWidth:!0,id:"lastName",label:"Last name",variant:"filled",onChange:this.addState})}),Object(y.jsx)("br",{}),Object(y.jsxs)(g.a,{variant:"filled",sx:{m:1,minWidth:300},children:[Object(y.jsx)(k.a,{id:"profileTypeLabel",children:"Type"}),Object(y.jsxs)(S.a,{labelId:"profileTypeLabel",id:"profileType",fullWidth:!0,label:"Type",variant:"filled",onChange:this.addType,children:[Object(y.jsx)("br",{}),Object(y.jsx)(w.a,{value:T.Benefited,name:"profileType",children:T.Benefited}),Object(y.jsx)(w.a,{value:T.Volunteer,name:"profileType",children:T.Volunteer})]})]}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a,{variant:"filled",sx:{m:1,minWidth:300},children:Object(y.jsx)(f.a,{fullWidth:!0,id:"email",label:"Email",variant:"filled",onChange:this.addState})}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a,{variant:"filled",sx:{m:1,minWidth:300},children:Object(y.jsx)(f.a,{fullWidth:!0,id:"password",label:"Password",type:"password",variant:"filled",onChange:this.addState})}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a,{variant:"filled",sx:{m:1,minWidth:300},children:Object(y.jsx)(f.a,{fullWidth:!0,id:"confirmPassword",label:"Confirm Password",type:"password",variant:"filled",helperText:""!=this.state.helperText?this.state.helperText:"",onChange:this.validatePassword})}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a,{variant:"filled",sx:{m:1,minWidth:300},children:Object(y.jsx)(x.a,{variant:"contained",onClick:this.register,children:"Register"})})]})})})}}]),s}(a.Component),W=s(228),D=s(218),P=s(229),I=s(95),M=s.n(I),U=s(231),E=s(230),L=s(114),R=s.n(L),B=s(115),G=s.n(B),J=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){var n;return Object(h.a)(this,s),(n=t.call(this,e,a)).state={message:"",user:n.props.user},n.post=n.post.bind(Object(b.a)(n)),n.onChange=n.onChange.bind(Object(b.a)(n)),n}return Object(j.a)(s,[{key:"onChange",value:function(e){this.setState(Object(d.a)(Object(d.a)({},this.state),{},{message:e.target.value})),console.log(this.state.message)}},{key:"post",value:function(){var e=this;console.log(v+"/post"),fetch("".concat(v)+"/post",{method:"POST",body:JSON.stringify({id:sessionStorage.getItem("id"),message:this.state.message}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.props.postCreated(t)}))}},{key:"render",value:function(){var e=this.state.user.name+" "+this.state.user.lastName+" post:",t="VOLUNTEER"==this.state.user.profileType?"How could you help us?":"How could we help you?";return Object(y.jsxs)("div",{style:{margin:10},children:[Object(y.jsx)(R.a,{sx:{position:"absolute",top:16,right:16,cursor:"pointer"},onClick:this.props.onClose}),Object(y.jsx)(f.a,{id:"standard-multiline-static",label:e,multiline:!0,rows:5,fullWidth:!0,placeholder:t,onChange:this.onChange,variant:"standard"}),Object(y.jsx)(O.a,{fullWidth:!0,sx:{borderRadius:1,border:1,marginTop:1},children:Object(y.jsxs)("div",{style:{margin:10},children:[" ","Add element",Object(y.jsx)(G.a,{sx:{float:"right",cursor:"pointer"}})]})}),Object(y.jsx)(x.a,{fullWidth:!0,variant:"contained",sx:{marginTop:1,backgroundColor:"#f15a24"},onClick:this.post,children:"Post"})]})}}]),s}(a.Component),F=s(227),H=s(116),V=s.n(H),z=s(71),A=s.n(z),_=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){var n;return Object(h.a)(this,s),(n=t.call(this,e,a)).state={post:n.props.post},n}return Object(j.a)(s,[{key:"render",value:function(){return console.log("Profiles"),console.log(this.state.post.profile.length>0),Object(y.jsx)("div",{className:"w-100",children:Object(y.jsxs)(O.a,{fullWidth:!0,sx:{with:"100%"},children:[Object(y.jsx)(V.a,{sx:{position:"absolute",top:16,right:16,cursor:"pointer",fontSize:20}}),Object(y.jsxs)(F.a,{container:!0,spacing:2,children:[Object(y.jsx)(F.a,{item:!0,sx:{},children:Object(y.jsx)(A.a,{sx:{fontSize:40,paddingRight:1}})}),Object(y.jsxs)(F.a,{item:!0,children:[Object(y.jsx)(O.a,{sx:{},children:this.state.post.profile.length>0?this.state.post.profile[0].name+" "+this.state.post.profile[0].lastName:"No name"}),Object(y.jsx)(O.a,{sx:{fontSize:10},children:new Date(this.state.post.createdDate).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})})]})]}),Object(y.jsx)(O.a,{fullWidth:!0,children:this.state.post.message}),Object(y.jsx)(O.a,{fullWidth:!0,children:Object(y.jsxs)(x.a,{sx:{backgroundColor:"#22b573",color:"#ffffff",float:"right"},children:["Chat",this.state.post.profile.length>0?" with "+this.state.post.profile[0].name:""]})})]})})}}]),s}(a.Component),Y=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){var n;return Object(h.a)(this,s),(n=t.call(this,e,a)).state={open:!0,newPost:!1,user:Object(),posts:[],snackbarMessage:"Welcome to Easy volunter"},n.onclick=n.onclick.bind(Object(b.a)(n)),n.onClose=n.onClose.bind(Object(b.a)(n)),n.open=n.open.bind(Object(b.a)(n)),n.close=n.close.bind(Object(b.a)(n)),n.postCreated=n.postCreated.bind(Object(b.a)(n)),n.getPost=n.getPost.bind(Object(b.a)(n)),n}return Object(j.a)(s,[{key:"componentDidMount",value:function(){this.getUser(),this.getPost(),console.log("State "+this.state.users)}},{key:"getUser",value:function(){var e=this;console.log("userId :"+sessionStorage.getItem("id")),fetch("".concat(v)+"/profile/"+sessionStorage.getItem("id"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var s=t.collection;console.log("User "+s),e.setState({user:s})}))}},{key:"getPost",value:function(){var e=this;fetch("".concat(v)+"/post/get/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var s=t.query;e.setState(Object(d.a)(Object(d.a)({},e.state),{},{posts:s}))}))}},{key:"onclick",value:function(){this.setState(Object(d.a)(Object(d.a)({},this.state),{},{open:!0}))}},{key:"onClose",value:function(e,t){"clickaway"!==t&&this.setState(Object(d.a)(Object(d.a)({},this.state),{},{open:!1}))}},{key:"open",value:function(){console.log(this.state),this.setState(Object(d.a)(Object(d.a)({},this.state),{},{newPost:!0}))}},{key:"close",value:function(){this.setState(Object(d.a)(Object(d.a)({},this.state),{},{newPost:!1}))}},{key:"postCreated",value:function(e){e.post?this.setState(Object(d.a)(Object(d.a)({},this.state),{},{posts:e.posts,newPost:!1,open:!0,snackbarMessage:"You created a post"})):this.setState(Object(d.a)(Object(d.a)({},this.state),{},{newPost:!1,open:!0,snackbarMessage:"Something wrong happened, please try again"}))}},{key:"render",value:function(){return Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{children:"Dashboard"}),Object(y.jsx)(m.a,{open:this.state.open,autoHideDuration:6e3,onClose:this.onClose,message:this.state.snackbarMessage}),Object(y.jsx)("div",{className:"d-flex justify-content-center pt-5wf4",children:Object(y.jsx)(O.a,{fullWidth:!0,sx:{maxWidth:"lg",width:600,padding:4},children:Object(y.jsx)(W.a,{children:this.state.posts.map((function(e){return Object(y.jsx)(D.a,{sx:{borderRadius:1,border:1,borderColor:"blue",mx:"auto",margin:2},children:Object(y.jsx)(_,{post:e})})}))})})}),Object(y.jsx)(O.a,{sx:{"& > :not(style)":{m:1}},children:Object(y.jsx)(P.a,{sx:{position:"absolute",bottom:16,right:16,backgroundColor:"#f15a24"},"aria-label":"add",onClick:this.open,children:Object(y.jsx)(M.a,{})})}),Object(y.jsx)("div",{children:Object(y.jsxs)(E.a,{fullWidth:!0,onClose:this.close,open:this.state.newPost,children:[Object(y.jsx)(U.a,{children:"New Post"}),Object(y.jsx)(J,{user:this.state.user,onClose:this.close,postCreated:this.postCreated})]})})]})}}]),s}(a.Component),q=s(217),K=s(211),Q=s(212),X=s(238),Z=s(239),$=s(240),ee=s(119),te=s.n(ee),se=s(121),ae=s.n(se),ne=s(117),ie=s.n(ne),oe=s(120),ce=s.n(oe),re=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){var n;return Object(h.a)(this,s),(n=t.call(this,e,a)).state={open:!1,logoutDialog:!1},n.handleDrawerToggle=n.handleDrawerToggle.bind(Object(b.a)(n)),n.logout=n.logout.bind(Object(b.a)(n)),n.open=n.open.bind(Object(b.a)(n)),n.cancel=n.cancel.bind(Object(b.a)(n)),n}return Object(j.a)(s,[{key:"handleDrawerToggle",value:function(){this.state.logoutDialog||this.setState(Object(d.a)(Object(d.a)({},this.state),{},{open:!this.state.open}))}},{key:"logout",value:function(){this.props.history.push("/Logout")}},{key:"open",value:function(){this.setState(Object(d.a)(Object(d.a)({},this.state),{},{logoutDialog:!0})),this.logout()}},{key:"cancel",value:function(){this.setState(Object(d.a)(Object(d.a)({},this.state),{},{logoutDialog:!1}))}},{key:"render",value:function(){return Object(y.jsxs)("div",{children:[Object(y.jsx)(x.a,{fontSize:"large",onClick:this.handleDrawerToggle,sx:{float:"left"},children:Object(y.jsx)(ie.a,{})}),Object(y.jsx)(q.a,{anchor:"left",open:this.state.open,onClose:this.handleDrawerToggle,onOpen:this.handleDrawerToggle,children:Object(y.jsx)(O.a,{sx:{width:250},role:"presentation",onClick:this.handleDrawerToggle,onKeyDown:this.handleDrawerToggle,children:Object(y.jsxs)(W.a,{children:[Object(y.jsx)(c.b,{className:"nav-link",to:"/Dashboard",children:Object(y.jsxs)(D.a,{button:!0,children:[Object(y.jsx)(K.a,{children:Object(y.jsx)(te.a,{})}),Object(y.jsx)(Q.a,{primary:"Dashboard"})]},"Dashboard")}),Object(y.jsx)(c.b,{className:"nav-link",to:"/Profile",children:Object(y.jsxs)(D.a,{button:!0,children:[Object(y.jsx)(K.a,{children:Object(y.jsx)(A.a,{})}),Object(y.jsx)(Q.a,{primary:"Profile"})]},"Profile")}),Object(y.jsx)(c.b,{className:"nav-link",to:"/Chat",children:Object(y.jsxs)(D.a,{button:!0,children:[Object(y.jsx)(K.a,{children:Object(y.jsx)(ce.a,{})}),Object(y.jsx)(Q.a,{primary:"Chat"})]},"Chat")}),Object(y.jsxs)(D.a,{button:!0,onClick:this.open,sx:{bottom:16},children:[Object(y.jsx)(K.a,{children:Object(y.jsx)(ae.a,{})}),Object(y.jsx)(Q.a,{primary:"Logout"})]},"Logout")]})})}),Object(y.jsxs)(E.a,{open:this.state.logoutDialog,keepMounted:!0,onClose:this.cancel,"aria-describedby":"alert-dialog-slide-description",children:[Object(y.jsx)(U.a,{children:"Logout?"}),Object(y.jsx)(X.a,{children:Object(y.jsx)(Z.a,{id:"alert-dialog-slide-description",children:"Do you want to logout?"})}),Object(y.jsxs)($.a,{children:[Object(y.jsx)(x.a,{onClick:this.cancel,children:"Cancel"}),Object(y.jsx)(x.a,{onClick:this.logout,children:"Logout"})]})]})]})}}]),s}(a.Component),le=Object(r.f)(re),de=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){var n;return Object(h.a)(this,s),(n=t.call(this,e,a)).state={name:"",lastName:"",email:"",open:!1},n.addState=n.addState.bind(Object(b.a)(n)),n.getUser=n.getUser.bind(Object(b.a)(n)),n.update=n.update.bind(Object(b.a)(n)),n}return Object(j.a)(s,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"addState",value:function(e){this.setState(Object(d.a)(Object(d.a)({},this.state),{},Object(l.a)({},e.target.id,e.target.value)))}},{key:"getUser",value:function(){var e=this;console.log(v+"/profile/"+sessionStorage.getItem("id")),fetch("".concat(v)+"/profile/"+sessionStorage.getItem("id"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){console.log(t);var s=t.collection;e.setState({name:s.name,lastName:s.lastName,email:s.email}),console.log(t)}))}},{key:"update",value:function(){var e=this;console.log("It is updating"),console.log(v+"/profile/"+this.state),fetch("".concat(v,"/edit/"),{method:"PUT",body:JSON.stringify({email:this.state.email,name:this.state.name,lastName:this.state.lastName,_id:sessionStorage.getItem("id")}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState(Object(d.a)(Object(d.a)({},e.state),{},{open:!0})),e.props.history.push("/Logout")}))}},{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsx)("div",{className:"d-flex justify-content-center pt-5wf4",children:Object(y.jsxs)(O.a,{fullWidth:!0,sx:{maxWidth:"lg",width:600,padding:4},children:[Object(y.jsx)("h3",{className:"justify-content-center",children:"Edit profile"}),Object(y.jsx)(g.a,{variant:"filled",sx:{m:1,minWidth:300},children:Object(y.jsx)(f.a,{fullWidth:!0,id:"name",label:"Name",variant:"filled",value:this.state.name,onChange:this.addState})}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a,{variant:"filled",sx:{m:1,minWidth:300},children:Object(y.jsx)(f.a,{fullWidth:!0,id:"lastName",label:"Last name",variant:"filled",value:this.state.lastName,onChange:this.addState})}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a,{variant:"filled",sx:{m:1,minWidth:300},children:Object(y.jsx)(f.a,{fullWidth:!0,id:"email",label:"Email",variant:"filled",value:this.state.email,onChange:this.addState})}),Object(y.jsx)("br",{}),Object(y.jsx)(g.a,{variant:"filled",sx:{m:1},children:Object(y.jsx)("div",{className:"d-flex",children:Object(y.jsx)(x.a,{variant:"contained",onClick:this.update,sx:{backgroundColor:"#22b573"},children:"Update profile"})})}),Object(y.jsx)(m.a,{open:this.state.open,autoHideDuration:6e3,onClose:this.onClose,message:"Please, login again."})]})})})}}]),s}(a.Component),he=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){return Object(h.a)(this,s),t.call(this,e,a)}return Object(j.a)(s,[{key:"render",value:function(){return Object(y.jsx)("div",{className:"max-weight",children:Object(y.jsxs)("div",{className:" d-flex justify-content-center align-self-center",children:[sessionStorage.removeItem("token"),sessionStorage.removeItem("id"),sessionStorage.removeItem("email"),this.props.history.push("/")]})})}}]),s}(a.Component),je=s(232),be=s(223),ue=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){var n;return Object(h.a)(this,s),(n=t.call(this,e,a)).state={user:"",friendID:""},n.getUser=n.getUser.bind(Object(b.a)(n)),n.goConversation=n.goConversation.bind(Object(b.a)(n)),n}return Object(j.a)(s,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"getUser",value:function(){var e=this,t=this.props.conversation.member.find((function(e){return e!==sessionStorage.getItem("id")}));this.setState(Object(d.a)(Object(d.a)({},this.state),{},{friendID:t})),fetch("".concat(v)+"/profile/"+t,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var s=t.collection;console.log("User "+s),e.setState({user:s})}))}},{key:"goConversation",value:function(){this.props.openConversation(this.props.conversation)}},{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsxs)(D.a,{alignItems:"flex-start",onClick:this.goConversation,children:[Object(y.jsx)(je.a,{children:Object(y.jsx)(be.a,{alt:"Remy Sharp",src:""})}),Object(y.jsx)(Q.a,{primary:this.state.user.name+" "+this.state.user.lastName})]})})}}]),s}(a.Component),pe=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){var n;return Object(h.a)(this,s),(n=t.call(this,e,a)).state={conversations:[]},n.getConversation=n.getConversation.bind(Object(b.a)(n)),n.openConversation=n.openConversation.bind(Object(b.a)(n)),n}return Object(j.a)(s,[{key:"openConversation",value:function(e){this.props.history.push({pathname:"/Conversation",state:e})}},{key:"componentDidMount",value:function(){this.getConversation()}},{key:"getConversation",value:function(){var e=this;fetch("".concat(v)+"/conversation/"+sessionStorage.getItem("id"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState(Object(d.a)(Object(d.a)({},e.setState),{},{conversations:t})),console.log("sttae"),console.log(e.state.conversations.length)}))}},{key:"render",value:function(){var e=this;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{className:"justify-content-center",children:"Chat"}),Object(y.jsx)("div",{className:" justify-content-center pt-5wf4",children:Object(y.jsx)(O.a,{fullWidth:!0,sx:{maxWidth:"md",padding:2,mx:"auto"},children:Object(y.jsx)(W.a,{sx:{width:"100%",maxWidth:"lg",bgcolor:"background.paper"},children:this.state.conversations.map((function(t){return Object(y.jsx)(ue,{conversation:t,openConversation:e.openConversation})}))})})})]})}}]),s}(a.Component),Oe=s(213),ge=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){var n;return Object(h.a)(this,s),(n=t.call(this,e,a)).state={},n}return Object(j.a)(s,[{key:"render",value:function(){var e="right"==this.props.sender?"justify-content-end":"justify-content-left",t="right"==this.props.sender?"#f15a24":"#22b573",s="right"==this.props.sender?"end":"left",a=this.props.message;return Object(y.jsx)(Oe.a,{className:"d-flex pt-5wf4 "+e,sx:{backgroundColor:"white",paddingRight:1},children:Object(y.jsxs)(Oe.a,{sx:{maxWidth:"md"},children:[Object(y.jsx)(Oe.a,{sx:{border:"1px solid "+t,backgroundColor:t,color:"white",borderRadius:5,margin:1,padding:1,textAlign:s},children:a.text}),Object(y.jsx)(Oe.a,{sx:{fontSize:10,float:this.props.sender,paddingRight:2,paddingLeft:2},children:a.createdAt})]})},this.props.key)}}]),s}(a.Component),fe=s(224),xe=s(241),me=s(125),ve=s.n(me),ye=s(126),Ce=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(e,a){var i;return Object(h.a)(this,s),(i=t.call(this,e,a)).state={user:"",messages:[],message:"",conversation:{},socket:{}},i.getUser=i.getUser.bind(Object(b.a)(i)),i.getMessages=i.getMessages.bind(Object(b.a)(i)),i.sendMessage=i.sendMessage.bind(Object(b.a)(i)),i.saveMessage=i.saveMessage.bind(Object(b.a)(i)),i.reference=n.a.createRef(),i}return Object(j.a)(s,[{key:"componentDidMount",value:function(){void 0==this.props.location.state?this.props.history.push("/Chat"):(this.setState(Object(d.a)(Object(d.a)({},this.state),{},{conversation:this.props.location.state})),this.getUser(),this.getMessages(),this.props.active&&this.reference.current.scrollIntoView()),this.setState(Object(d.a)(Object(d.a)({},this.state),{},{socket:Object(ye.a)("ws://localhost:8900")}))}},{key:"getUser",value:function(){var e=this,t=this.props.location.state.member.find((function(e){return e!==sessionStorage.getItem("id")}));fetch("".concat(v)+"/profile/"+t,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){var s=t.collection;e.setState({user:s})}))}},{key:"getMessages",value:function(){var e=this;fetch("".concat(v)+"/message/"+this.props.location.state._id,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState(Object(d.a)(Object(d.a)({},e.state),{},{messages:t}))}))}},{key:"sendMessage",value:function(e){var t=this;this.setState(Object(d.a)(Object(d.a)({},this.state),{},{message:""})),fetch("".concat(v)+"/message/",{method:"POST",body:JSON.stringify({senderId:sessionStorage.getItem("id"),conversationId:this.props.location.state._id,text:this.state.message}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("messages"),console.log(e),t.setState(Object(d.a)(Object(d.a)({},t.state),{},{messages:e}))}))}},{key:"saveMessage",value:function(e){this.setState(Object(d.a)(Object(d.a)({},this.state),{},{message:e.target.value}))}},{key:"render",value:function(){var e=this,t=sessionStorage.getItem("id");return Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{children:"Message with: "+this.state.user.name}),Object(y.jsxs)("div",{className:" justify-content-center pt-5wf4",children:[Object(y.jsx)(O.a,{fullWidth:!0,sx:{maxWidth:"md",mx:"auto",height:"80vh",maxHeight:"80vh",backgroundColor:"white",overflow:"scroll"},children:0!=this.state.messages.length?this.state.messages.map((function(s,a){return Object(y.jsx)("div",{ref:e.reference,children:Object(y.jsx)(ge,{sender:t===s.senderId?"right":"left",message:s},a)})})):Object(y.jsx)("div",{children:"You haven't chatted yet!"})}),Object(y.jsx)(O.a,{sx:{maxWidth:"md",mx:"auto",paddingTop:1},children:Object(y.jsx)(g.a,{sx:{width:"100%"},variant:"filled",children:Object(y.jsx)(fe.a,{placeholder:"Message...",onChange:this.saveMessage,value:this.state.message,endAdornment:Object(y.jsx)(xe.a,{position:"end",sx:{cursor:"pointer"},children:Object(y.jsx)(ve.a,{"aria-label":"toggle password visibility",onClick:this.sendMessage,edge:"end"})})})})})]})]})}}]),s}(a.Component);var ke=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(c.a,{children:Object(y.jsxs)(r.c,{children:[Object(y.jsx)(r.a,{path:"/",exact:!0,component:C}),Object(y.jsx)(r.a,{path:"/Register",exact:!0,component:N}),Object(y.jsxs)("div",{children:[Object(y.jsx)(le,{}),Object(y.jsx)(r.a,{path:"/Dashboard",exact:!0,component:Y}),Object(y.jsx)(r.a,{path:"/Profile",exact:!0,component:de}),Object(y.jsx)(r.a,{path:"/Logout",exact:!0,component:he}),Object(y.jsx)(r.a,{path:"/Chat",exact:!0,component:pe}),Object(y.jsx)(r.a,{path:"/Conversation",exact:!0,component:Ce})]})]})})})},Se=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,242)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,o=t.getTTFB;s(e),a(e),n(e),i(e),o(e)}))},we=function(){o.a.render(Object(y.jsx)(ke,{}),document.getElementById("root"))};window.cordova?document.addEventListener("deviceready",(function(){we()}),!1):we(),Se()}},[[165,1,2]]]);
//# sourceMappingURL=main.894ea316.chunk.js.map